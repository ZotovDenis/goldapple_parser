# Проект по парсингу товаров онлайн-магазина "Золотое яблоко"


![Python](https://img.shields.io/badge/Python-3.11-FFD43B?logo=python)
![Selenium](https://img.shields.io/badge/Selenium-4.16.0-%2523109688?logo=selenium&labelColor=hsl)
![Pandas](https://img.shields.io/badge/Pandas-2.1.4-0078D7?logo=pandas)
![BeautifulSoup](https://img.shields.io/badge/BeautifulSoup-4.12.2-6c757d)
![httpx](https://img.shields.io/badge/httpx-0.25.2-C0C0C0)


## Цель проекта

Произвести поиск и выгрузить в CSV-файл все товары из категории "Парфюмерия" онлайн-магазина [Золотое яблоко](https://goldapple.ru/).


## Техническое задание

- [x] код оформлен согласно PEP8
- [x] код покрыт тестами минимум на 75%
- [x] доступна документация
- [ ] итоговая выгрузка в виде файла приложена к Readme

## Информация в CSV-файле

Информация, полученная из категории [Парфюмерия](https://goldapple.ru/parfjumerija):

- ссылка на продукт
- наименование
- цена
- рейтинг пользователей
- описание продукта
- инструкция по применению
- страна-производитель

_В случае, если какие-либо данные не указаны на сайте, в соответствующее поле в файле записано "Not available"._

## ❗Нюансы работы❗

На сайте магазина [Золотое яблоко](https://goldapple.ru/) используется защита от парсинга, которая каждый день изменяет
разметку страницы. Поэтому перед использованием кода из этого проекта необходимо удостовериться, что все __*CLASS_NAME*__
актуальны. В противном случае - требуется внести в код изменения. 

__*CLASS_NAME*__, которые необходимо проверять в файле __main.py__:

- для значения *tablet_items_class* (88 строка)
- для значения *url* (96 строка)
- для значения *p_item_description* (147 строка)
- для значения *p_item_instructions* (179 строка)
- для значения *p_item_country* (182 строка)


В функции __*main()*__ приведен пример для теста работы парсера:

```ini
#    product_urls = ["https://goldapple.ru/26830400003-dreaming-with-ghosts",
#                    "https://goldapple.ru/7430500002-eau-fraiche",
#                    "https://goldapple.ru/19000225097"
#                    ]
```

Чтобы проверить работоспособность, необходимо его раскомментировать, а участок кода, который выполняет сбор данных
по всей категории Парфюмерии, закомментировать. Как должен выглядеть код для проверки работоспособности на
ограниченном количестве товаров:

```ini
    # print("Загрузка данных...")
    # product_urls = get_all_products_urls(end_page=408)
    # print("Готово! Получено {} товаров.".format(len(product_urls)))
```

```
    product_urls = ["https://goldapple.ru/26830400003-dreaming-with-ghosts",
                    "https://goldapple.ru/7430500002-eau-fraiche",
                    "https://goldapple.ru/19000225097"
                    ]
```

Также не рекомендуется изменять время ожидания (_time.sleep(n)_) в коде на более низкое значение _n_, так как можно
получить блокировку по IP-адресу за слишком частое обращение к ресурсу.

## Запуск приложения

- Скачайте в домашнюю директорию.

- Создайте виртуальное окружение venv командой:

__*python -m venv venv*__

- Активируйте виртуальное окружение командой:

__*venv\Scripts\activate.bat*__

- Установите зависимости командой:

__*pip install -r requirements.txt*__

- Убедитесь, что все рекомендации из пункта "Нюансы работы" соблюдены.

- Введите в терминале команду:

__*python main.py*__ _(Windows)_

__*python3 main.py*__ _(Linux, MacOS)_

Результат выполнения программы будет сохранен в директорию проекта в CSV-файл, название которого вы указали в коде:

```ini
CSV_PATH = "data.csv"
```

## Дополнительная информация

__Покрытие проекта тестами__ - 91%

__Покрытие *main.py* тестами__ - 79%